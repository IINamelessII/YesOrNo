(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(62),l=n.n(r),s=n(1),c=n(2),i=n(4),u=n(3),m=n(5),d=n(22),p=n.n(d),f=n(41),h=n(42),v=n.n(h),g=Symbol(),b=Symbol(),w=function e(){var t=this;Object(s.a)(this,e),this.URL="",this.API_URL="".concat(this.URL,"/api"),this[g]=function(){var e=Object(f.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(t,n);case 2:if(a=e.sent,/2[0-9]{2}/.test(a.status.toString())){e.next=5;break}throw new Error("Fetching '".concat(t,"' failed, received ").concat(a.status));case 5:return e.next=7,a.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),this[b]=function(){var e=Object(f.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(t,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.auth=function(e,n){return t[b]("".concat(t.URL,"/signin/"),{username:e,password:n})},this.register=function(e,n,a){return t[b]("".concat(t.API_URL,"/signup/"),{email:e,username:n,password:a})},this.resetPassword=function(e){return t[b]("".concat(t.API_URL,"/resetpassword/"),{email:e})},this.sendData=function(e,n,a){return t[b]("".concat(t.URL,"/").concat(e),n,a)},this.getFlows=function(e){return t[g]("".concat(t.API_URL,"/flows"),e)},this.getAllPolls=function(e){return t[g]("".concat(t.API_URL,"/polls"),e)},this.getPollsByFlow=function(e,n){return t[g]("".concat(t.API_URL,"/polls_by_flow/").concat(e),n)},this.getPollsByUser=function(e,n){return t[g]("".concat(t.API_URL,"/polls_by_user/").concat(e),n)},this.getUserdata=function(){return t[g]("".concat(t.API_URL,"/profile/"))}},E=o.a.createContext({is_auth:!1}),y=o.a.createContext(function(){}),j=(n(92),function(){return o.a.createElement("div",{className:"logo"},o.a.createElement("div",{className:"logo__icon"}),o.a.createElement("span",{className:"logo__splash"},"yes-or-no"))}),O=n(21),_=n(63),k=n(64),N=n.n(k),C=n(10),S=(n(141),function(e){return function(t){return function(n){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(o)))).state={isShown:!0},t.onToggleShow=function(e){t.setState(function(e){return{isShown:!e.isShown}})},t.onClickOnBg=function(e){"center-container"===e.target.className&&t.setState(function(e){return{isShown:!e.isShown}})},t}return Object(m.a)(a,n),Object(c.a)(a,[{key:"render",value:function(){var n=this.props,a=n.centered,r=Object(C.a)(n,["centered"]),l=this.state.isShown,s=o.a.createElement(e,Object.assign({},r,{onToggleShow:this.onToggleShow})),c=o.a.createElement("div",{className:"center-container",onClick:this.onClickOnBg},s);return o.a.createElement(o.a.Fragment,null,t(this.onToggleShow,l),l&&(a?c:s))}}]),a}(o.a.Component)}}),I=n(8),P=function e(){Object(s.a)(this,e)};P.insertElement=function(e,t,n){return[].concat(Object(I.a)(e.slice(0,t)),[n],Object(I.a)(e.slice(t)))},P.replaceElement=function(e,t,n){return[].concat(Object(I.a)(e.slice(0,t)),[n],Object(I.a)(e.slice(t+1)))},P.modifyElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return[].concat(Object(I.a)(e.slice(0,t)),[n(e[t])],Object(I.a)(e.slice(t+1)))},P.deleteElement=function(e,t){return[].concat(Object(I.a)(e.slice(0,t)),Object(I.a)(e.slice(t+1)))};var A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var a="string"===typeof t?t:"object"===typeof t&&t[Object.keys(t)[0]]?Object.keys(t)[0]:"";return e+(0!==n&&a?" "+a:a)},"")},F=(n(142),function(e){var t=e.label,n=void 0===t?"Button":t,a=e.flat,r=e.secondary,l=e.small,s=e.large,c=e.className,i=void 0===c?"":c,u=Object(C.a)(e,["label","flat","secondary","small","large","className"]);return o.a.createElement("button",Object.assign({className:A("button",{"button--flat":a},{"button--secondary":r},{"button--small":l},{"button--large":s},i)},u),n)}),U=(n(143),o.a.memo(function(e){var t=e.label,n=e.value,a=e.name,r=e.type,l=e.error,s=void 0!==l&&l,c=e.onChange,i=Object(C.a)(e,["label","value","name","type","error","onChange"]);return o.a.createElement("label",{className:A("form-field",{"form-field--not-empty":!!n},{"form-field--error":s})},o.a.createElement("span",{className:"form-field__label"},t),o.a.createElement("input",Object.assign({className:"form-field__input",type:r,name:a,value:n,onChange:c,autoComplete:"off"},i)),s&&o.a.createElement("div",{className:"form-field__error-message"},"Invalid ",a,"!"))},function(e,t){return e.value===t.value})),R=n(26),L=(n(144),o.a.memo(function(e){var t=Object(R.a)(e.messages,2),n=t[0],a=t[1],r=e.onClick;return o.a.createElement("span",{className:"register-prompt"},o.a.createElement("span",null,n),o.a.createElement("span",{className:"register-prompt__action",onClick:r},a))},function(e,t){var n=Object(R.a)(e.messages,2),a=n[0],o=n[1],r=Object(R.a)(t.messages,2),l=r[0],s=r[1];return a===l||o===s})),x=(n(145),function(e){return{login:e.login||"",password:e.password||"",email:e.email||"",registering:!!e.email||!1,canSubmit:!1}}),D=S(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).yonApi=new w,n.state=x(n.props),n.onInputChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(function(e){var t;return Object(_.a)({},e,(t={},Object(O.a)(t,a,o),Object(O.a)(t,"canSubmit",n.inputValid(e)),t))})},n.inputValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state,t=e.login,a=e.password,o=e.email,r=e.registering;return!!t&&!!a&&(!r||!!o)},n.toggleRegistration=function(){n.setState(function(e){return{registering:!e.registering}})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.login,o=t.password,r=t.email,l=t.canSubmit,s=t.registering,c=n.props.profileUpdate;l&&(s?n.yonApi.register(r,a,o):n.yonApi.auth(a,o),n.setState(x({}),function(){c&&c()}))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.login,n=e.password,a=e.email,r=e.registering,l=r?"Sign up":"Sign in",s=o.a.createElement(U,{type:"text",name:"login",label:"Username",value:t,onChange:this.onInputChange}),c=o.a.createElement(U,{type:"password",name:"password",label:"Password",value:n,onChange:this.onInputChange}),i=o.a.createElement(U,{type:"text",name:"email",label:"Email",value:a,onChange:this.onInputChange});return o.a.createElement("form",{className:"login-form",onSubmit:this.onSubmit},o.a.createElement(N.a,null),o.a.createElement("h2",{className:"login-form__splash"},l),o.a.createElement("div",{className:"login-form__fields"},r&&i,s,c),o.a.createElement(F,{label:l}),o.a.createElement(L,{messages:r?["Already have an account?","Sign in then!"]:["Don't have an account yet?","Create a new one!"],onClick:this.toggleRegistration}))}}]),t}(o.a.Component))(function(e,t){return o.a.createElement(F,{label:"Sign in",onClick:e,flat:t})}),V=(n(146),function(){return o.a.createElement("header",{className:"app-header"},o.a.createElement(j,null),o.a.createElement(y.Consumer,null,function(e){return o.a.createElement(D,{profileUpdate:e,centered:!0})}))}),B=(n(147),function(e){var t=e.mimicClass,n=void 0===t?"":t;return o.a.createElement("div",{className:"loader ".concat(n)})}),T=(n(148),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).yonAPI=new w,n.state={flows:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.yonAPI.getFlows().then(function(t){return e.setState({flows:t})})}},{key:"render",value:function(){var e=this.props,t=e.selectedFlow,n=e.handleSelectFlow,a=(e.loggedIn,this.state.flows);if(null===a)return o.a.createElement(B,{mimicClass:"flows"});var r=0===a.length?o.a.createElement("div",{className:"flow"},"Whoops! Empty!"):a.map(function(e){return o.a.createElement(F,{className:"flow",key:"flow-".concat(e.id),label:e.name,secondary:e.name===t,onClick:function(){return n(e.name)}})});return o.a.createElement("div",{className:"flows"},o.a.createElement("div",{className:"flows__splash"},"Choose a flow"),o.a.createElement(F,{className:"flow",label:"+",onClick:function(){return console.log("puff!")},flat:!0}),r)}}]),t}(o.a.Component)),Y=(n(149),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.flowsProps;return o.a.createElement("nav",{className:"sidemenu"},o.a.createElement(T,e))}}]),t}(o.a.Component)),W=function(e){return function(t){var n=t.loading,a=Object(C.a)(t,["loading"]);return n?o.a.createElement(B,null):o.a.createElement(e,a)}},M=(n(150),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).onVoteYes=function(){n.props.onVote("+")},n.onVoteNo=function(){n.props.onVote("-")},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.agreed,n=e.disagreed;return e.voted!==this.props.voted||t!==this.props.agreed||n!==this.props.disagreed}},{key:"render",value:function(){var e=this.props,t=e.agreed,n=e.disagreed,a=e.voted,r=e.is_auth,l="+"===a,s="-"===a;return o.a.createElement("div",{className:"votebar"},r&&o.a.createElement("div",{className:"votebar__btn votebar__btn--agree",onClick:this.onVoteYes,"data-voted":l}),o.a.createElement("div",{className:"votebar__bar","data-agreed":t,"data-disagreed":n,"data-voted":a,style:{"--agree-width":t/(t+n)}}),r&&o.a.createElement("div",{className:"votebar__btn votebar__btn--disagree",onClick:this.onVoteNo,"data-voted":s}))}}]),t}(o.a.Component)),J=(n(151),function(e){var t=e.liked,n=e.rated,a=e.onRate,r="+"===n;return o.a.createElement("div",{className:"likesection"},o.a.createElement("div",{className:"likesection__btn likesection__btn--like","data-liked":t,"data-pressed":r,onClick:function(){return a("+")}}))}),H=(n(152),function(e){return{voted:e.voted,rated:e.rated}}),q=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).yonAPI=new w,n.state=H(n.props),n.onVote=function(e){var t=n.state.voted,a=n.props.poll.id,o="";switch(t){case null:o="+"===e?"voteYes/":"voteNo/";break;case"-":o="+"===e?"switchtoYes/":"unvoteNo/";break;case"+":o="+"===e?"unvoteYes/":"switchtoNo/"}n.setState(function(e){e.voted}),n.yonAPI.sendData(o,{id:a})},n.onRate=function(e){var t=n.state.rated,a=n.props.poll.id,o="";switch(t){case null:o="+"===e?"voteLike/":"voteDislike/";break;case"-":o="+"===e?"switchtoLike/":"unvoteDislike/";break;case"+":o="+"===e?"unvoteLike/":"switchtoDislike/"}n.setState(function(e){e.rated}),n.yonAPI.sendData(o,{id:a})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.poll,n=e.is_auth,a=this.state,r=a.voted,l=a.rated;return o.a.createElement("article",{className:"poll"},o.a.createElement("h2",{className:"poll__name"},t.statement),o.a.createElement("div",{className:"poll__votes"},o.a.createElement(M,{agreed:t.agree,disagreed:t.disagree,voted:r,is_auth:n,onVote:this.onVote}),n&&o.a.createElement(J,{liked:t.likes,disliked:t.dislikes,rated:l,onRate:this.onRate})))}}]),t}(o.a.Component),z=(n(153),W(function(e){var t=e.polls,n=Object(a.useContext)(E),r=n.is_auth?Object.keys(n.voted).map(function(e){return+e}):[],l=n.is_auth?Object.keys(n.rated).map(function(e){return+e}):[],s=t.map(function(e,t){var a=r.includes(e.id),s=l.includes(e.id),c=n.is_auth?{voted:a?n.voted[e.id]?"+":"-":void 0,rated:s?n.rated[e.id]?"+":"-":void 0}:{};return o.a.createElement(q,Object.assign({poll:e,key:e.id,is_auth:n.is_auth},c))});return o.a.createElement("section",{className:"polls"},t.length>0?s:o.a.createElement("span",{className:"polls__empty-message"},"Whoops! No polls here!"))})),G=(n(154),function(e){var t=e.label;return o.a.createElement("h1",{className:"body-header"},t)}),K=(n(155),function(){var e=Object(a.useContext)(E),t=e.is_auth&&" (hello, ".concat(e.username,"!)"),n=o.a.createElement(F,{label:"+",style:{margin:"0 .5rem",display:"inline-flex",padding:0},flat:!0}),r=o.a.createElement("a",{href:"https://t.me/IINamelessII",target:"__blank"},"@IINamelessII"),l=o.a.createElement("a",{href:"https://t.me/inokentich",target:"__blank"},"@inokentich");return o.a.createElement("div",{className:"greeting-page"},o.a.createElement(G,{label:"Welcome to YesOrNo alpha v0.666!"}),o.a.createElement("div",{className:"greeting-page__content"},o.a.createElement("p",null,"Each alpha-tester ",t," is recommended to register / sign in and ",n," at least 5 polls distributed among any flows and also vote in polls created by other users."),o.a.createElement("p",null,'To start voting choose Flow or just push "Random!" button in left column. To add a Poll sign in and press + in left column.'),o.a.createElement("p",null,"Report problems found to",o.a.createElement("span",{className:"text--accent"}," theyesornoproject@gmail.com")," or to us in Telegram: ",r,", ",l,"."),o.a.createElement("p",null,"Have a nice time! With best wishes, IINamelessII & yugisu.")))}),Q=(n(156),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).yonApi=new w,n.state={polls:[],pollsLoading:!0},n.onPollsUpdated=function(e){n.setState({polls:e,pollsLoading:!1})},n.updatePolls=function(){n.props.selectedFlow&&n.setState({polls:[],pollsLoading:!0},function(){n.yonApi.getPollsByFlow(n.props.selectedFlow).then(n.onPollsUpdated)})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selectedFlow!==e.selectedFlow&&this.updatePolls()}},{key:"componentDidMount",value:function(){this.updatePolls()}},{key:"render",value:function(){var e=this.state,t=e.polls,n=e.pollsLoading,a=this.props.selectedFlow,r=null!==a?o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{label:a}),o.a.createElement(z,{loading:n,polls:t})):o.a.createElement(K,null);return o.a.createElement("div",{className:"app-body"},r)}}]),t}(o.a.Component)),X=(n(157),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return e++}}()),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return e++}}(),$=(X(),X(),X(),Z(),Z(),Z(),Z(),Z(),Z(),Z(),Z(),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).yonApi=new w,n.state={selectedFlow:null,userdata:{is_auth:!1}},n.updateProfile=function(){n.yonApi.getUserdata().then(function(e){return n.setState({userdata:e},function(){return console.log(n.state.userdata)})})},n.handleSelectFlow=function(e){n.setState({selectedFlow:e})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateProfile()}},{key:"render",value:function(){var e=this.state,t=e.selectedFlow,n=e.userdata,a={selectedFlow:t,handleSelectFlow:this.handleSelectFlow};return o.a.createElement("div",{className:"app"},o.a.createElement(E.Provider,{value:n},o.a.createElement(y.Provider,{value:this.updateProfile},o.a.createElement(V,null)),o.a.createElement(Y,{flowsProps:a,loggedIn:n.is_auth}),o.a.createElement(Q,{selectedFlow:t,userdata:n})))}}]),t}(o.a.Component));n(158);l.a.render(o.a.createElement($,null),document.getElementById("root"))},65:function(e,t,n){e.exports=n(159)},92:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.bda5a8fc.chunk.js.map